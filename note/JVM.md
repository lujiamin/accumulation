## JVM 五大区
- 运行时数据区包括：程序计数器、java栈、本地方法栈、堆、方法区
- java栈又叫做虚拟机栈
- 本地方法栈
- 堆是java垃圾回收器主要管理的地方，堆是被所有线程所共享的，在JVM中只有一个堆。在虚拟机启动时创建，用来存放对象实例。
- 方法区 是各个线程共享的内存区域，用于存储已被虚拟机加载的类信息、常量、静态变量
- 程序计数器，它的作用可以看做是当前线程所执行的字节码的行号指示器。在任何一个确定的时刻，一个处理器（对于多核处理器来说是一个内核）只会执行一条线程中的指令。


## JVM 加载类
#### 类加载器分为 BootStrap ClassLoader——ExtClassLoader——AppClassLoader——自定义类
#### 类加载机制
- 全盘负责——当一个类加载器负责加载某个Class时，该Class所依赖的和引用的其他Class也将有该加载器负责载入。
- 父类委托——首先由父类加载器去加载，只有在父类加载器无法加载时才尝试从自己的类路径中加载该类。
- 缓存机制——所有加载过的类都会被保存，先在缓存区中寻找该Class，不存在才会去读取该类对应的二进制数据。
#### 主要步骤: 加载——连接——初始化——使用——卸载，其中连接包括检查-检查class文件的正确性，准备-给类中的静态变量分配存储空间，解析-把类中的符号引用转化为直接引用

## 垃圾回收(GC)
#### 主要任务是分配内存，确保被引用的对象的内存不被错误回收，回收不再被引用的对象的内存
#### 回收算法
- 引用计数法，对象被引用时，引用计数器加1，离开作用域时或为空时，计数器减1。无法解决相互引用的问题。
- 追踪回收法，遍历对象，未被标记的可以被回收
- 压缩回收法，将堆中活动的对象移到堆中一端，相当于对堆中的碎片进行了处理
- 复制回收法，把堆分成大小两个相同的区域，当其中一个区域被消耗完时，垃圾回收器中断程序的执行，将其中活动的对象复制到另外一个区域中。
- 按代回收法，把堆分成多个子堆，分为新生代和老年代
#### Minor GC 和 Full GC(Major GC)
- Minor GC 回收非常频繁。
- Full GC 速度较慢
## 收集器分类及其使用场景
- Serial 收集器: 单线程，虚拟机运行在 Client 模式下的默认新生代收集器
- ParNew 收集器: 多线程，许多运行在Server模式下的虚拟机中首选的新生代收集器
- Parallel Scavenge: 新生代收集器，并行的多线程收集器。适合在后台运算而不需要太多交互的任务
- Serial Old 收集器: 老年代，单线程收集器
- Parallel Old 收集器: 老年代版本，多线程
- CMS 收集器: 是一种以获取最短回收停顿时间为目标的收集器，更短的停顿时间，更好的用户体验
- G1 收集器: 一款面向服务端应用的垃圾收集器.

## 吞吐量
- CPU 用于运行用户代码的时间与CPU总消耗时间的比值。即运行代码时间/(运行代码时间+垃圾收集时间)。

